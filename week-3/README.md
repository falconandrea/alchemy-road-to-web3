## How to build an NFT with On-Chain Metadata

**Tutorial**: [Youtube](https://www.youtube.com/watch?v=8FJvY4zXvPE) - [Alchemy Docs](https://docs.alchemy.com/docs/how-to-make-nfts-with-on-chain-metadata-hardhat-and-javascript)

**What I learn**:

1. How to store NFTs metadata on chain
2. What is Polygon and why it's important to lower Gas fees.
3. How to deploy on Polygon Mumbai
4. How to process and store on-chain SVG images and JSON objects
5. How to modify your metadata based on your interactions with the NFT

**Hardhat Commands and output**:

_Compile your contract and create json in artifacts folder:_

`npx hardhat compile --force`

---

_Run test script in local:_

`npx hardhat run scripts/test.js`

```
ChainBattles deployed to  0x5FbDB2315678afecb367f032d93F642f64180aa3

characterInfo base64 data:application/json;base64,eyJsZXZlbCI6ICIxIiwiaHAiOiAiMjAiLCJtcCI6ICIxNSIsInNwZWVkIjogIjEwIiwic3RyZW5ndGgiOiAiMTUifQ==

characterURI base64 data:application/json;base64,eyJuYW1lIjogIkNoYWluIEJhdHRsZXMgIzEiLCJkZXNjcmlwdGlvbiI6ICJCYXR0bGVzIG9uIGNoYWluIiwiaW1hZ2UiOiAiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhCeVpYTmxjblpsUVhOd1pXTjBVbUYwYVc4OUluaE5hVzVaVFdsdUlHMWxaWFFpSUhacFpYZENiM2c5SWpBZ01DQXpOVEFnTXpVd0lqNDhjM1I1YkdVK0xtSmhjMlVnZXlCbWFXeHNPaUIzYUdsMFpUc2dabTl1ZEMxbVlXMXBiSGs2SUhObGNtbG1PeUJtYjI1MExYTnBlbVU2SURFMGNIZzdJSDA4TDNOMGVXeGxQanh5WldOMElIZHBaSFJvUFNJeE1EQWxJaUJvWldsbmFIUTlJakV3TUNVaUlHWnBiR3c5SW1Kc1lXTnJJaUF2UGp4MFpYaDBJSGc5SWpVd0pTSWdlVDBpTWpBbElpQmpiR0Z6Y3owaVltRnpaU0lnWkc5dGFXNWhiblF0WW1GelpXeHBibVU5SW0xcFpHUnNaU0lnZEdWNGRDMWhibU5vYjNJOUltMXBaR1JzWlNJK1YyRnljbWx2Y2p3dmRHVjRkRDQ4ZEdWNGRDQjRQU0kxTUNVaUlIazlJak13SlNJZ1kyeGhjM005SW1KaGMyVWlJR1J2YldsdVlXNTBMV0poYzJWc2FXNWxQU0p0YVdSa2JHVWlJSFJsZUhRdFlXNWphRzl5UFNKdGFXUmtiR1VpUGt4bGRtVnNjem9nTVR3dmRHVjRkRDQ4ZEdWNGRDQjRQU0kxTUNVaUlIazlJalF3SlNJZ1kyeGhjM005SW1KaGMyVWlJR1J2YldsdVlXNTBMV0poYzJWc2FXNWxQU0p0YVdSa2JHVWlJSFJsZUhRdFlXNWphRzl5UFNKdGFXUmtiR1VpUGtoUU9pQXlNQ0F0SUUxUU9pQXhOVHd2ZEdWNGRENDhkR1Y0ZENCNFBTSTFNQ1VpSUhrOUlqVXdKU0lnWTJ4aGMzTTlJbUpoYzJVaUlHUnZiV2x1WVc1MExXSmhjMlZzYVc1bFBTSnRhV1JrYkdVaUlIUmxlSFF0WVc1amFHOXlQU0p0YVdSa2JHVWlQbE53WldWa09pQXhNQ0F0SUZOMGNtVnVaM1JvT2lBeE5Ud3ZkR1Y0ZEQ0OEwzTjJaejQ9In0=

characterInfo base64 after train data:application/json;base64,eyJsZXZlbCI6ICIyIiwiaHAiOiAiMjMiLCJtcCI6ICIyMCIsInNwZWVkIjogIjEzIiwic3RyZW5ndGgiOiAiMjIifQ==

characterURI base64 after train data:application/json;base64,eyJuYW1lIjogIkNoYWluIEJhdHRsZXMgIzEiLCJkZXNjcmlwdGlvbiI6ICJCYXR0bGVzIG9uIGNoYWluIiwiaW1hZ2UiOiAiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhCeVpYTmxjblpsUVhOd1pXTjBVbUYwYVc4OUluaE5hVzVaVFdsdUlHMWxaWFFpSUhacFpYZENiM2c5SWpBZ01DQXpOVEFnTXpVd0lqNDhjM1I1YkdVK0xtSmhjMlVnZXlCbWFXeHNPaUIzYUdsMFpUc2dabTl1ZEMxbVlXMXBiSGs2SUhObGNtbG1PeUJtYjI1MExYTnBlbVU2SURFMGNIZzdJSDA4TDNOMGVXeGxQanh5WldOMElIZHBaSFJvUFNJeE1EQWxJaUJvWldsbmFIUTlJakV3TUNVaUlHWnBiR3c5SW1Kc1lXTnJJaUF2UGp4MFpYaDBJSGc5SWpVd0pTSWdlVDBpTWpBbElpQmpiR0Z6Y3owaVltRnpaU0lnWkc5dGFXNWhiblF0WW1GelpXeHBibVU5SW0xcFpHUnNaU0lnZEdWNGRDMWhibU5vYjNJOUltMXBaR1JzWlNJK1YyRnljbWx2Y2p3dmRHVjRkRDQ4ZEdWNGRDQjRQU0kxTUNVaUlIazlJak13SlNJZ1kyeGhjM005SW1KaGMyVWlJR1J2YldsdVlXNTBMV0poYzJWc2FXNWxQU0p0YVdSa2JHVWlJSFJsZUhRdFlXNWphRzl5UFNKdGFXUmtiR1VpUGt4bGRtVnNjem9nTWp3dmRHVjRkRDQ4ZEdWNGRDQjRQU0kxTUNVaUlIazlJalF3SlNJZ1kyeGhjM005SW1KaGMyVWlJR1J2YldsdVlXNTBMV0poYzJWc2FXNWxQU0p0YVdSa2JHVWlJSFJsZUhRdFlXNWphRzl5UFNKdGFXUmtiR1VpUGtoUU9pQXlNeUF0SUUxUU9pQXlNRHd2ZEdWNGRENDhkR1Y0ZENCNFBTSTFNQ1VpSUhrOUlqVXdKU0lnWTJ4aGMzTTlJbUpoYzJVaUlHUnZiV2x1WVc1MExXSmhjMlZzYVc1bFBTSnRhV1JrYkdVaUlIUmxlSFF0WVc1amFHOXlQU0p0YVdSa2JHVWlQbE53WldWa09pQXhNeUF0SUZOMGNtVnVaM1JvT2lBeU1qd3ZkR1Y0ZEQ0OEwzTjJaejQ9In0=
```

The first base64 is the json with stats

```
{"level": "1","hp": "20","mp": "15","speed": "10","strength": "15"}
```

The second base64 is the json with NFT metadata

```
{"name": "Chain Battles #1","description": "Battles on chain","image": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaW5ZTWluIG1lZXQiIHZpZXdCb3g9IjAgMCAzNTAgMzUwIj48c3R5bGU+LmJhc2UgeyBmaWxsOiB3aGl0ZTsgZm9udC1mYW1pbHk6IHNlcmlmOyBmb250LXNpemU6IDE0cHg7IH08L3N0eWxlPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImJsYWNrIiAvPjx0ZXh0IHg9IjUwJSIgeT0iMjAlIiBjbGFzcz0iYmFzZSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+V2FycmlvcjwvdGV4dD48dGV4dCB4PSI1MCUiIHk9IjMwJSIgY2xhc3M9ImJhc2UiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkxldmVsczogMTwvdGV4dD48dGV4dCB4PSI1MCUiIHk9IjQwJSIgY2xhc3M9ImJhc2UiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkhQOiAyMCAtIE1QOiAxNTwvdGV4dD48dGV4dCB4PSI1MCUiIHk9IjUwJSIgY2xhc3M9ImJhc2UiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPlNwZWVkOiAxMCAtIFN0cmVuZ3RoOiAxNTwvdGV4dD48L3N2Zz4="}
```

The image inside show stats before training

## Image before training NFT

![image](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaW5ZTWluIG1lZXQiIHZpZXdCb3g9IjAgMCAzNTAgMzUwIj48c3R5bGU+LmJhc2UgeyBmaWxsOiB3aGl0ZTsgZm9udC1mYW1pbHk6IHNlcmlmOyBmb250LXNpemU6IDE0cHg7IH08L3N0eWxlPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImJsYWNrIiAvPjx0ZXh0IHg9IjUwJSIgeT0iMjAlIiBjbGFzcz0iYmFzZSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+V2FycmlvcjwvdGV4dD48dGV4dCB4PSI1MCUiIHk9IjMwJSIgY2xhc3M9ImJhc2UiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkxldmVsczogMTwvdGV4dD48dGV4dCB4PSI1MCUiIHk9IjQwJSIgY2xhc3M9ImJhc2UiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkhQOiAyMCAtIE1QOiAxNTwvdGV4dD48dGV4dCB4PSI1MCUiIHk9IjUwJSIgY2xhc3M9ImJhc2UiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPlNwZWVkOiAxMCAtIFN0cmVuZ3RoOiAxNTwvdGV4dD48L3N2Zz4=)

After using the "train" contract method, the statistics change:

```
{"level": "2","hp": "23","mp": "20","speed": "13","strength": "22"}

{"name": "Chain Battles #1","description": "Battles on chain","image": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaW5ZTWluIG1lZXQiIHZpZXdCb3g9IjAgMCAzNTAgMzUwIj48c3R5bGU+LmJhc2UgeyBmaWxsOiB3aGl0ZTsgZm9udC1mYW1pbHk6IHNlcmlmOyBmb250LXNpemU6IDE0cHg7IH08L3N0eWxlPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImJsYWNrIiAvPjx0ZXh0IHg9IjUwJSIgeT0iMjAlIiBjbGFzcz0iYmFzZSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+V2FycmlvcjwvdGV4dD48dGV4dCB4PSI1MCUiIHk9IjMwJSIgY2xhc3M9ImJhc2UiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkxldmVsczogMjwvdGV4dD48dGV4dCB4PSI1MCUiIHk9IjQwJSIgY2xhc3M9ImJhc2UiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkhQOiAyMyAtIE1QOiAyMDwvdGV4dD48dGV4dCB4PSI1MCUiIHk9IjUwJSIgY2xhc3M9ImJhc2UiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPlNwZWVkOiAxMyAtIFN0cmVuZ3RoOiAyMjwvdGV4dD48L3N2Zz4="}
```

And here is the SVG updated with new stats

![image](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaW5ZTWluIG1lZXQiIHZpZXdCb3g9IjAgMCAzNTAgMzUwIj48c3R5bGU+LmJhc2UgeyBmaWxsOiB3aGl0ZTsgZm9udC1mYW1pbHk6IHNlcmlmOyBmb250LXNpemU6IDE0cHg7IH08L3N0eWxlPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImJsYWNrIiAvPjx0ZXh0IHg9IjUwJSIgeT0iMjAlIiBjbGFzcz0iYmFzZSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+V2FycmlvcjwvdGV4dD48dGV4dCB4PSI1MCUiIHk9IjMwJSIgY2xhc3M9ImJhc2UiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkxldmVsczogMjwvdGV4dD48dGV4dCB4PSI1MCUiIHk9IjQwJSIgY2xhc3M9ImJhc2UiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkhQOiAyMyAtIE1QOiAyMDwvdGV4dD48dGV4dCB4PSI1MCUiIHk9IjUwJSIgY2xhc3M9ImJhc2UiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPlNwZWVkOiAxMyAtIFN0cmVuZ3RoOiAyMjwvdGV4dD48L3N2Zz4=")

---

_Deploy the contract on the blockchain without specify a network (on local):_

`npx hardhat run scripts/deploy.js`

It returns always the same address `0x5FbDB2315678afecb367f032d93F642f64180aa3`

```
ChainBattles deployed to  0x5FbDB2315678afecb367f032d93F642f64180aa3
```

---

_Deploy the contract on a specific blockchain (you can insert new networks in the file `hardhat.config.js`):_

`npx hardhat run scripts/deploy.js --network mumbai`

This command deploy the contract on Polygon Mumbai Blockchain and return the Mumbai address. Each time you will run the command, you will deploy the contract to a new address.
You can see it on [Mumbai Polygonscan](https://mumbai.polygonscan.com/).

**When deploy for the first time on a specific network, you can get the contract address and use it with the Polygonscan to interact with your contract.**
